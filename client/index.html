<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>RUN PARK</title>
        <link rel="stylesheet" href="./style.css">
        <script type="module" src="./index.js"></script>
        <link rel="manifest" href="./manifest.json">
    </head>

    <body>
        <header>
            <h1>RUN PARK</h1>

            <nav class="nav-container">
                <select id="nav-dropdown">
                    <option value="">-- Choose View --</option>
                    <option value="runners-results">Runners</option>
                    <option value="volunteer-view">Volunteer</option>
                    <option value="admin-view">Admin</option>
                </select>
            </nav>
        </header>

        <nav id="volunteer-nav" style="display: none">
            <button class ="nav-buttons" id="timer">Timer</button>
            <button class ="nav-buttons" id="positions">Submission</button>
        </nav>


        <main class="main-container">
            <article class="section-container" id="info">
                <h2> Welcome to Run Park</h2>

                <p>
                    This app is for park runs, to record times and race submission 
                    (runner's id and finished positions).
                </p>
            
                <p>
                    Please use offline/ airplane mode whilst recording time and runners submissions.
                </p>
                <p>
                    To get started, please select a view on the top right!
                </p>
            </article>

            <!-- Error Messages -->
            <section id="error-container">
                <p><span id="error-message"></span></p>
            </section> 
            
            <!-- Admin view -->
            <section class="section-container" id="admin-container">
                <h2>Race Data Overview</h2>
                <p id="initial-message" style="display: none"> Click a row to modify!</p>
                <p id="create-message"  style="display: none"> Select the results:</p>


                <!-- Create Result -->
                <section id="wrap-buttons">
                    <button id="admin-reload">Reload</button>
                    <button id="create-results" style="display: none">Create Results</button>

                    <section id="create-results-buttons" style="display: none">
                        <button type="submit" id="submit-results">Submit Results</button>
                        <button id="cancel-create-results">Cancel</button>
                    </section>
                </section>

                <table id="race-data-table">
                    <thead>
                        <tr>
                            <th>Client</th>
                            <th>Type</th>
                            <th>Record</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody>
                            <!--blank table initially, gets filled when there is data-->
                    </tbody>
                </table>
            </section>

            <button id="manage-back" style="display: none">Back</button>
            <!-- Manage Times - Admin -->
            <section class="section-container" id="time-management-container" style="display:none">
                <h2>Manage Times</h2>
                <button id="modify-times">Edit</button>

                <section class="modify-view" id="modify-times-container" style="display:none">
                    <button id="add-time" >Add Time</button>
                    <button id="save-times" >Save Times</button> 

                    <section class="popup" id="time-popup" style="display:none">

                        <label for="time-input">Time: </label>
                        <input type="text" id="time-input" value='00:00:00:000'>

                        <button type="submit" id="times-popup-done">Done</button>
                        <button id="times-popup-cancel">Cancel</button>
                    </section>
                </section>

                <ul class="position-times" id="times-management-list">
                    <!--Times and position are added here -->
                </ul>  
            </section>

            <!-- Manage Runners - Admin -->
            <section class="section-container" id="runner-management-container" style="display:none">
                <h2>Manage Runners</h2>
                <button id="modify-runners">Modify</button>
                <section class="modify-view" id="modify-runner-container" style="display:none">
                    <button id="add-runner">Add Runner</button>
                    <button id="save-runners">Save Runners</button> 
                    
                
                    <section class="popup" id="runner-popup" style="display:none">
                        <label for="edit-runner-position">Position:</label>
                        <input type="number" id="edit-runner-position">
                    
                        <label for="edit-runner-id">ID:</label>
                        <input type="number" id="edit-runner-id">
                        
                        <button id="runner-popup-done">Done</button>
                        <button id="runner-popup-cancel">Cancel</button>
                    </section>
                </section>

                <ul class="position-times" id="runners-management-list">
                <!-- Runners will be added here -->
                </ul>  

            </section>

            <!-- Stopwatch Timer - Volunteer -->
            <section class="section-container" id="timer-container">
                <section class="stopwatch-container">
                    <h2>Race Timer</h2>

                    <button id="stop" style="display: none">Stop</button>
                    <button id="reset" style="display: none">Reset</button>
                    <button id="submit-times" style="display: none">Submit</button>

                    <div id="stopwatch-display">00:00:00:000</div>

                    <button id="start">Start</button>
                    <button id="record-time" style="display: none">Record Time</button>
                    <button id="resume" style="display: none">Resume</button>
                </section>

                <button class="clear" id="clear-times" >Clear Time</button>

                <section class="position-container">
                    <ol class="position-times" id="times-list">
                    <!-- Times and positions are added here -->
                    </ol>
                </section>
            </section>

            <!-- Runners Positions Submission - Volunteer -->
            <section class="section-container" id="runners-container">
                <h2>Submit Runner's Positions</h2>

                <section class ="runners-input-container">
                    <label for="runner-position">Position:</label>
                    <input type="number" id="runner-position" name="runner-position" required>

                    <label for="runner-ID">ID Number:</label>
                    <input type="number" id="runner-ID" name="runner-ID" required>

                    
                    <button type="submit" id="submit-runners"> Done </button>
                    <button type="button" id="record-runner">Add Runner</button>
                </section>
                
                <button class="clear" id="clear-runners">Clear Runner</button>

                <section class="runners-container">
                    <h3>Recorded Submissions</h3>
                    <ul class="position-times" id="runners-list">
                    <!-- Runner's ID and Name -->
                    </ul>
                </section>
            </section>

            <!-- Overall Results -->
            <section class="section-container" id="result-container">
                <h2>Overall Result</h2>
                <button id="results-reload" >Reload</button>
                <button id="export-csv" style="display: none">Download Results</button>
                <table id="results-table">
                    <thead>
                        <tr>
                            <th>Position</th> 
                            <th>Name</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody>
                            <!--blank table initially-->
                    </tbody>
                </table>
            </section>

        </main>
    </body>
</html>
